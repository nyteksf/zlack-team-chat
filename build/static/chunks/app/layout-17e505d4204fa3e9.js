(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8827:function(e,t,n){Promise.resolve().then(n.bind(n,135)),Promise.resolve().then(n.t.bind(n,6157,23)),Promise.resolve().then(n.t.bind(n,3716,23)),Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.bind(n,3735)),Promise.resolve().then(n.bind(n,29)),Promise.resolve().then(n.bind(n,6199)),Promise.resolve().then(n.bind(n,4903))},1620:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});let r=n(1321).qL},3735:function(e,t,n){"use strict";n.d(t,{ConvexClientProvider:function(){return l}});var r=n(7437),s=n(7266),a=n(2683);let o=new s.Zj("https://kindred-eagle-5.convex.cloud");function l(e){let{children:t}=e;return(0,r.jsx)(a.l,{client:o,children:t})}},29:function(e,t,n){"use strict";n.d(t,{JotaiProvider:function(){return a}});var r=n(7437),s=n(2964);let a=e=>{let{children:t}=e;return(0,r.jsx)(s.zt,{children:t})}},6199:function(e,t,n){"use strict";n.d(t,{Modals:function(){return v}});var r=n(7437),s=n(2265),a=n(4438),o=n(9376),l=n(3106),i=n(7266),c=n(1620);let u=()=>{let[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(null),[a,o]=(0,s.useState)(null),l=(0,s.useMemo)(()=>"pending"===a,[a]),u=(0,s.useMemo)(()=>"success"===a,[a]),d=(0,s.useMemo)(()=>"error"===a,[a]),f=(0,s.useMemo)(()=>"settled"===a,[a]),m=(0,i.Db)(c.h.channels.create);return{mutate:(0,s.useCallback)(async(e,n)=>{var s,a,l;try{t(null),r(null),o("pending");let a=await m(e);return null==n||null===(s=n.onSuccess)||void 0===s||s.call(n,a),a}catch(e){if(o("error"),null==n||null===(a=n.onError)||void 0===a||a.call(n,e),null==n?void 0:n.throwError)throw e}finally{o("settled"),null==n||null===(l=n.onSettled)||void 0===l||l.call(n)}},[m]),data:e,error:n,isPending:l,isSuccess:u,isError:d,isSettled:f}};var d=n(6937),f=n(279),m=n(2381),g=n(4291);let p=()=>{let e=(0,o.useRouter)(),t=(0,l.m)(),[n,i]=(0,d.O)(),{mutate:c,isPending:p}=u(),[h,x]=(0,s.useState)(""),b=()=>{x(""),i(!1)};return(0,r.jsx)(g.Vq,{open:n,onOpenChange:b,children:(0,r.jsxs)(g.cZ,{className:"p-0 bg-gray-50 overflow-hidden rounded-xl",children:[(0,r.jsxs)(g.fK,{className:"p-4 border-b bg-gray-100",children:[(0,r.jsx)(g.$N,{children:"Add a channel"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Channel names must be lowercase and without spaces"})]}),(0,r.jsxs)("form",{className:"p-4 space-y-6",onSubmit:n=>{n.preventDefault(),c({name:h,workspaceId:t},{onSuccess:n=>{a.Am.success("Channel created successfully"),e.push("/workspace/".concat(t,"/channel/").concat(n)),b()},onError:()=>{a.Am.error("Failed to create new channel.")}})},children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Channel name"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 select-none",children:"#"}),(0,r.jsx)(f.I,{value:h,onChange:e=>{x(e.target.value.replace(/\s+/g,"-").toLowerCase())},disabled:p,required:!0,autoFocus:!0,minLength:3,maxLength:80,placeholder:"e.g. plan-budget",className:"pl-7 pr-3 h-10 border-gray-300"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[h.length,"/80 characters"]})]}),(0,r.jsxs)(g.cN,{className:"gap-x-2",children:[(0,r.jsx)(g.GG,{asChild:!0,children:(0,r.jsx)(m.z,{variant:"outline",disabled:p,onClick:b,children:"Cancel"})}),(0,r.jsx)(m.z,{type:"submit",disabled:p||!h.trim(),children:p?"Creating...":"Create"})]})]})]})})};var h=n(6225);let x=()=>{let[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(null),[a,o]=(0,s.useState)(null),l=(0,s.useMemo)(()=>"pending"===a,[a]),u=(0,s.useMemo)(()=>"success"===a,[a]),d=(0,s.useMemo)(()=>"error"===a,[a]),f=(0,s.useMemo)(()=>"settled"===a,[a]),m=(0,i.Db)(c.h.workspaces.create);return{mutate:(0,s.useCallback)(async(e,n)=>{var s,a,l;try{t(null),r(null),o("pending");let a=await m(e);return null==n||null===(s=n.onSuccess)||void 0===s||s.call(n,a),a}catch(e){if(o("error"),null==n||null===(a=n.onError)||void 0===a||a.call(n,e),null==n?void 0:n.throwError)throw e}finally{o("settled"),null==n||null===(l=n.onSettled)||void 0===l||l.call(n)}},[m]),data:e,error:n,isPending:l,isSuccess:u,isError:d,isSettled:f}},b=()=>{let e=(0,o.useRouter)(),[t,n]=(0,h.D)(),[l,i]=(0,s.useState)(""),{mutate:c,isPending:u}=x(),d=()=>{n(!1),i("")},p=async t=>{t.preventDefault(),c({name:l},{onSuccess(t){a.Am.success("Workspace created successfully."),e.push("/workspace/".concat(t)),d()}})};return(0,r.jsx)(g.Vq,{open:t,onOpenChange:d,children:(0,r.jsxs)(g.cZ,{className:"p-0 bg-gray-50 overflow-hidden rounded-xl",children:[(0,r.jsx)(g.fK,{className:"p-4 border-b bg-gray-100",children:(0,r.jsx)(g.$N,{children:"Create New Workspace"})}),(0,r.jsxs)("form",{onSubmit:p,className:"p-4 space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Workspace name"}),(0,r.jsx)(f.I,{disabled:u,value:l,onChange:e=>i(e.target.value),required:!0,autoFocus:!0,minLength:3,maxLength:80,placeholder:"e.g. work, personal, home",className:"h-10 border-gray-300"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[l.length,"/80 characters"]})]}),(0,r.jsxs)(g.cN,{className:"gap-x-2",children:[(0,r.jsx)(g.GG,{asChild:!0,children:(0,r.jsx)(m.z,{type:"button",variant:"outline",disabled:u,onClick:d,children:"Cancel"})}),(0,r.jsx)(m.z,{type:"submit",disabled:u||!l.trim(),children:u?"Creating...":"Create"})]})]})]})})},v=()=>{let[e,t]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{t(!0)},[]),e)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{}),(0,r.jsx)(b,{})]}):null}},2381:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(7437),s=n(2265),a=n(7053),o=n(535),l=n(3448);let i=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",transparent:"bg-transparent hover:bg-accent/10 text-accent"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",iconSm:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:n,variant:s,size:o,asChild:c=!1,...u}=e,d=c?a.g7:"button";return(0,r.jsx)(d,{className:(0,l.cn)(i({variant:s,size:o,className:n})),ref:t,...u})});c.displayName="Button"},4291:function(e,t,n){"use strict";n.d(t,{$N:function(){return h},Be:function(){return x},GG:function(){return d},Vq:function(){return i},cN:function(){return p},cZ:function(){return m},fK:function(){return g},hg:function(){return c}});var r=n(7437),s=n(2265),a=n(9027),o=n(2489),l=n(3448);let i=a.fC,c=a.xz,u=a.h_,d=a.x8,f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s})});f.displayName=a.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:n,children:s,...i}=e;return(0,r.jsxs)(u,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(a.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...i,children:[s,(0,r.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=a.VY.displayName;let g=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};g.displayName="DialogHeader";let p=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};p.displayName="DialogFooter";let h=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",n),...s})});h.displayName=a.Dx.displayName;let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...s})});x.displayName=a.dk.displayName},279:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(7437),s=n(2265),a=n(3448);let o=s.forwardRef((e,t)=>{let{className:n,type:s,...o}=e;return(0,r.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...o})});o.displayName="Input"},4903:function(e,t,n){"use strict";n.d(t,{Toaster:function(){return o}});var r=n(7437),s=n(5922),a=n(4438);let o=e=>{let{...t}=e,{theme:n="system"}=(0,s.F)();return(0,r.jsx)(a.x7,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})}},6937:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var r=n(3915),s=n(2964);let a=(0,r.cn)(!1),o=()=>(0,s.KO)(a)},6225:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(3915),s=n(2964);let a=(0,r.cn)(!1),o=()=>(0,s.KO)(a)},3106:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var r=n(9376);let s=()=>(0,r.useParams)().workspaceId},3448:function(e,t,n){"use strict";n.d(t,{cn:function(){return a}});var r=n(1994),s=n(3335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}},2778:function(){}},function(e){e.O(0,[636,432,317,279,579,644,964,667,971,117,744],function(){return e(e.s=8827)}),_N_E=e.O()}]);