(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[321],{86:function(e,s,t){Promise.resolve().then(t.bind(t,4950))},4950:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return e$}});var a=t(7437),r=t(6540),l=t(6136),n=t(4438),i=t(2265),o=t(6614),d=t(7300),c=t(5432),u=t(769),m=t(2489),x=t(6865),h=t(166),f=t(8291),p=t(3106),v=t(7266),j=t(1620);let g=e=>{let{id:s}=e,t=(0,v.aM)(j.h.messages.getById,{id:s});return{data:t,isLoading:void 0===t}};var b=t(4749),N=t(6046),y=t(9279),w=t(9975),k=t(5360),z=t(2381);let F=(0,h.default)(()=>Promise.all([t.e(466),t.e(665),t.e(546),t.e(145),t.e(229)]).then(t.bind(t,2229)),{loadableGenerated:{webpack:()=>[2229]},ssr:!1}),C=e=>{let s=new Date(e);return(0,o.z)(s)?"Today":(0,d.g)(s)?"Yesterday":(0,c.WU)(s,"EEEE, MMMM d")},_=e=>{let{messageId:s,onClose:t}=e,l=(0,f.b)(),o=(0,p.m)(),[d,h]=(0,i.useState)(null),[v,j]=(0,i.useState)(0),[_,S]=(0,i.useState)(!1),A=(0,i.useRef)(null),{mutate:Z}=(0,N.g)(),{mutate:E}=(0,w.u)(),{data:M}=(0,y.i)({workspaceId:o}),{data:I,isLoading:R}=g({id:s});console.log("message: ",I);let{results:L,status:D,loadMore:T}=(0,b.K)({channelId:l,parentMessageId:s}),O="CanLoadMore"===D,Y=async e=>{var t,a;let{body:r,image:i}=e;try{S(!0),null==A||null===(t=A.current)||void 0===t||t.enable(!1);let e={channelId:l,workspaceId:o,parentMessageId:s,body:r,image:void 0};if(i){let s=await E({},{throwError:!0});if(!s)throw Error("Image URL not found");let t=await fetch(s,{method:"POST",headers:{"Content-Type":i.type},body:i});if(!t.ok)throw Error("Failed to upload image");let{storageId:a}=await t.json();e.image=a}await Z(e,{throwError:!0}),j(e=>e+1)}catch(e){n.Am.error("Message failed to send"),console.log(e)}finally{S(!1),null==A||null===(a=A.current)||void 0===a||a.enable(!0)}},P=null==L?void 0:L.reduce((e,s)=>{let t=new Date(s._creationTime),a=(0,c.WU)(t,"MM-dd-yyyy");return e[a]||(e[a]=[]),e[a].unshift(s),e},{});return R||"LoadingFirstPage"===D?(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"h-[49px] flex justify-between items-center px-4 border-b",children:[(0,a.jsx)("p",{className:"text-lg font-bold",children:"Thread"}),(0,a.jsx)(z.z,{onClick:t,size:"iconSm",variant:"ghost",children:(0,a.jsx)(m.Z,{className:"size-5 stroke-[1.5]"})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 h-full items-center justify-center",children:[(0,a.jsx)(r.Z,{className:"size-5 animate-spin text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Message not found"})]})})]}):I?(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"h-[49px] flex justify-between items-center px-4 border-b",children:[(0,a.jsx)("p",{className:"text-lg font-bold",children:"Thread"}),(0,a.jsx)(z.z,{onClick:t,size:"iconSm",variant:"ghost",children:(0,a.jsx)(m.Z,{className:"size-5 stroke-[1.5]"})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col-reverse pb-4 overflow-y-auto messages-scrollbar",children:[Object.entries(P||{}).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-center my-2 relative",children:[(0,a.jsx)("hr",{className:"absolute top-1/2 left-0 right-0 border-t border-gray-300"}),(0,a.jsx)("span",{className:"relative inline-block bg-white px-4 py-1 rounded-full text-xs border border-gray-300 shadow-sm",children:C(s)})]}),t.map((e,s)=>{var r,l;let n=t[s-1],i=n&&(null===(r=n.user)||void 0===r?void 0:r._id)===(null===(l=e.user)||void 0===l?void 0:l._id)&&5>(0,u.X)(new Date(e._creationTime),new Date(n._creationTime));return(0,a.jsx)(k.v,{id:e._id,memberId:e.memberId,authorImage:e.user.image,isAuthor:e.memberId===(null==M?void 0:M._id),authorName:e.user.name,reactions:e.reactions,body:e.body,image:e.image,updatedAt:e.updatedAt,createdAt:e._creationTime,isEditing:d===e._id,setEditingId:h,isCompact:i,hideThreadButton:!0,threadCount:e.threadCount,threadImage:e.threadImage,threadTimestamp:e.threadTimestamp},e._id)})]},s)}),(0,a.jsx)("div",{className:"h-1",ref:e=>{if(e){let s=new IntersectionObserver(e=>{let[s]=e;s.isIntersecting&&O&&T()},{threshold:1});return s.observe(e),()=>s.disconnect()}}}),"LoadingMore"===D&&(0,a.jsxs)("div",{className:"text-center my-2 relative",children:[(0,a.jsx)("hr",{className:"absolute top-1/2 left-0 right-0 border-t border-gray-300"}),(0,a.jsx)("span",{className:"relative inline-block bg-white px-4 py-1 rounded-full text-xs border border-gray-300 shadow-sm",children:(0,a.jsx)(r.Z,{className:"size-4 animate-spin"})})]}),(0,a.jsx)(k.v,{hideThreadButton:!0,memberId:I.memberId,authorImage:I.user.image,authorName:I.user.name,isAuthor:I.memberId===(null==M?void 0:M._id),body:I.body,image:I.image,createdAt:I._creationTime,updatedAt:I.updatedAt,id:I._id,reactions:I.reactions,isEditing:d===I._id,threadName:I.threadName,setEditingId:h})]}),(0,a.jsx)("div",{className:"px-4",children:(0,a.jsx)(F,{onSubmit:Y,innerRef:A,disabled:_,placeholder:"Reply..."},v)})]}):(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"h-[49px] flex justify-between items-center px-4 border-b",children:[(0,a.jsx)("p",{className:"text-lg font-bold",children:"Thread"}),(0,a.jsx)(z.z,{onClick:t,size:"iconSm",variant:"ghost",children:(0,a.jsx)(m.Z,{className:"size-5 stroke-[1.5]"})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 h-full items-center justify-center",children:[(0,a.jsx)(x.Z,{className:"size-5 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Message not found"})]})})]})};var S=t(7648),A=t(9376),Z=t(875),E=t(9345),M=t(2618);let I=()=>{let[e,s]=(0,i.useState)(null),[t,a]=(0,i.useState)(null),[r,l]=(0,i.useState)(null),n=(0,i.useMemo)(()=>"pending"===r,[r]),o=(0,i.useMemo)(()=>"success"===r,[r]),d=(0,i.useMemo)(()=>"error"===r,[r]),c=(0,i.useMemo)(()=>"settled"===r,[r]),u=(0,v.Db)(j.h.members.remove);return{mutate:(0,i.useCallback)(async(e,t)=>{var r,n,i;try{s(null),a(null),l("pending");let n=await u(e);return null==t||null===(r=t.onSuccess)||void 0===r||r.call(t,n),n}catch(e){if(l("error"),null==t||null===(n=t.onError)||void 0===n||n.call(t,e),null==t?void 0:t.throwError)throw e}finally{l("settled"),null==t||null===(i=t.onSettled)||void 0===i||i.call(t)}},[u]),data:e,error:t,isPending:n,isSuccess:o,isError:d,isSettled:c}},R=()=>{let[e,s]=(0,i.useState)(null),[t,a]=(0,i.useState)(null),[r,l]=(0,i.useState)(null),n=(0,i.useMemo)(()=>"pending"===r,[r]),o=(0,i.useMemo)(()=>"success"===r,[r]),d=(0,i.useMemo)(()=>"error"===r,[r]),c=(0,i.useMemo)(()=>"settled"===r,[r]),u=(0,v.Db)(j.h.members.update);return{mutate:(0,i.useCallback)(async(e,t)=>{var r,n,i;try{s(null),a(null),l("pending");let n=await u(e);return null==t||null===(r=t.onSuccess)||void 0===r||r.call(t,n),n}catch(e){if(l("error"),null==t||null===(n=t.onError)||void 0===n||n.call(t,e),null==t?void 0:t.throwError)throw e}finally{l("settled"),null==t||null===(i=t.onSettled)||void 0===i||i.call(t)}},[u]),data:e,error:t,isPending:n,isSuccess:o,isError:d,isSettled:c}};var L=t(5863),D=t(1593),T=t(6246),O=t(2060);let Y=e=>{var s,t;let{memberId:l,onClose:i}=e,o=(0,A.useRouter)(),d=(0,p.m)(),[c,u]=(0,L.t)("Change role","Are you sure you want to change the selected member's role?"),[h,f]=(0,L.t)("Leave workspace","Are you sure you want to leave this workspace?"),[v,j]=(0,L.t)("Remove member","Are you sure you want to remove this member?"),{data:g,isLoading:b}=(0,y.i)({workspaceId:d}),{data:N,isLoading:w}=(0,M.R)({id:l}),{mutate:k,isPending:F}=R(),{mutate:C,isPending:_}=I(),Y=async()=>{await j()&&C({id:l},{onSuccess:()=>{n.Am.success("Member has been removed successfully"),i()},onError:()=>{n.Am.error("Failed to remove member. Are they an admin?")}})},P=async()=>{await f()&&C({id:l},{onSuccess:()=>{n.Am.success("You have left the workspace."),o.replace("/"),i()},onError:()=>{n.Am.error("Failed to leave the workspace")}})},B=async e=>{await u()&&k({id:l,role:e},{onSuccess:()=>{n.Am.success("Member role has been changed successfully"),i()},onError:()=>{n.Am.error("Failed to change member role")}})};if(w||b)return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"h-[49px] flex justify-between items-center px-4 border-b",children:[(0,a.jsx)("p",{className:"text-lg font-bold",children:"Thread"}),(0,a.jsx)(z.z,{onClick:i,size:"iconSm",variant:"ghost",children:(0,a.jsx)(m.Z,{className:"size-5 stroke-[1.5]"})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 h-full items-center justify-center",children:[(0,a.jsx)(r.Z,{className:"size-5 animate-spin text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Profile not found"})]})})]});if(!N)return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"h-[49px] flex justify-between items-center px-4 border-b",children:[(0,a.jsx)("p",{className:"text-lg font-bold",children:"Profile"}),(0,a.jsx)(z.z,{onClick:i,size:"iconSm",variant:"ghost",children:(0,a.jsx)(m.Z,{className:"size-5 stroke-[1.5]"})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 h-full items-center justify-center",children:[(0,a.jsx)(x.Z,{className:"size-5 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sorry, profile not found"})]})})]});let U=null!==(t=null===(s=N.user.name)||void 0===s?void 0:s[0])&&void 0!==t?t:"M";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{}),(0,a.jsx)(h,{}),(0,a.jsx)(c,{}),(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"h-[49px] flex justify-between items-center px-4 border-b",children:[(0,a.jsx)("p",{className:"text-lg font-bold",children:"Profile"}),(0,a.jsx)(z.z,{onClick:i,size:"iconSm",variant:"ghost",children:(0,a.jsx)(m.Z,{className:"size-5 stroke-[1.5]"})})]}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex flex-col items-center justify-center p-4",children:(0,a.jsxs)(T.qE,{className:"max-w-[256px] max-h-[256px] size-full",children:[(0,a.jsx)(T.F$,{src:N.user.image}),(0,a.jsx)(T.Q5,{className:"aspect-square text-6xl",children:U})]})})}),(0,a.jsxs)("div",{className:"flex flex-col p-4",children:[(0,a.jsx)("p",{className:"text-xl font-bold",children:N.user.name}),(null==g?void 0:g.role)==="admin"&&(null==g?void 0:g._id)!==l?(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsxs)(O.h_,{children:[(0,a.jsx)(O.$F,{asChild:!0,children:(0,a.jsxs)(z.z,{variant:"outline",className:"w-full capitalize",children:[N.role," ",(0,a.jsx)(Z.Z,{className:"size-4 ml-1"})]})}),(0,a.jsx)(O.AW,{className:"w-full",children:(0,a.jsxs)(O._x,{value:N.role,onValueChange:e=>B(e),children:[(0,a.jsx)(O.qB,{value:"admin",children:"Admin"}),(0,a.jsx)(O.qB,{value:"member",children:"Member"})]})})]}),(0,a.jsx)(z.z,{onClick:Y,variant:"outline",className:"w-full",children:"Remove"})]}):(null==g?void 0:g._id)===l&&(null==g?void 0:g.role)!=="admin"?(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(z.z,{onClick:P,variant:"outline",className:"w-full",children:"Leave"})}):null]}),(0,a.jsx)(D.Z,{}),(0,a.jsxs)("div",{className:"flex flex-col p-4",children:[(0,a.jsx)("p",{className:"text-sm font-bold mb-4",children:"Contact information"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"size-9 rounded-md bg-muted flex items-center justify-center",children:(0,a.jsx)(E.Z,{className:"size-4"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"text-[13px] font-semibold text-muted-foreground",children:"Email address"}),(0,a.jsx)(S.default,{href:"mailto:".concat(N.user.email),className:"text-sm hover:underline text-[#1264A3]",children:N.user.email})]})]})]})]})]})};var P=t(1905),B=t(3374),U=t(3448);let V=e=>{let{className:s,...t}=e;return(0,a.jsx)(B.eh,{className:(0,U.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",s),...t})},W=B.s_,q=e=>{let{withHandle:s,className:t,...r}=e;return(0,a.jsx)(B.OT,{className:(0,U.cn)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...r,children:s&&(0,a.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:(0,a.jsx)(P.Z,{className:"h-2.5 w-2.5"})})})};var $=t(3247),X=t(3245);let H=e=>{let{workspaceId:s}=e,t=(0,v.aM)(j.h.members.get,{workspaceId:s});return{data:t,isLoading:void 0===t}};var G=t(7009),K=t(1843),Q=t(6343),J=t(4291);let ee=i.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Q.mY,{ref:s,className:(0,U.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...r})});ee.displayName=Q.mY.displayName;let es=e=>{let{children:s,...t}=e;return(0,a.jsx)(J.Vq,{...t,children:(0,a.jsx)(J.cZ,{className:"overflow-hidden p-0 shadow-lg",children:(0,a.jsx)(ee,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:s})})})},et=i.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)($.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(Q.mY.Input,{ref:s,className:(0,U.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...r})]})});et.displayName=Q.mY.Input.displayName;let ea=i.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Q.mY.List,{ref:s,className:(0,U.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...r})});ea.displayName=Q.mY.List.displayName;let er=i.forwardRef((e,s)=>(0,a.jsx)(Q.mY.Empty,{ref:s,className:"py-6 text-center text-sm",...e}));er.displayName=Q.mY.Empty.displayName;let el=i.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Q.mY.Group,{ref:s,className:(0,U.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...r})});el.displayName=Q.mY.Group.displayName;let en=i.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Q.mY.Separator,{ref:s,className:(0,U.cn)("-mx-1 h-px bg-border",t),...r})});en.displayName=Q.mY.Separator.displayName;let ei=i.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Q.mY.Item,{ref:s,className:(0,U.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...r})});ei.displayName=Q.mY.Item.displayName;let eo=()=>{let e=(0,p.m)(),s=(0,A.useRouter)(),{data:t}=(0,K.F)({id:e}),{data:r}=(0,G.B)({workspaceId:e}),{data:l}=H({workspaceId:e}),[n,o]=(0,i.useState)(!1),d=t=>{o(!1),s.push("/workspace/".concat(e,"/channel/").concat(t))},c=t=>{o(!1),s.push("/workspace/".concat(e,"/member/").concat(t))};return(0,a.jsxs)("nav",{className:"bg-[#481349] flex items-center justify-between h-10 p-1.5",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsxs)("div",{className:"m-w-[280px] max-[642px] grow-[2] shrink",children:[(0,a.jsxs)(z.z,{onClick:()=>o(!0),size:"sm",className:"bg-accent/25 hover:bg-accent-25 w-full justify-start h-7 px-2",children:[(0,a.jsx)($.Z,{className:"size-4 text-[#F5F5F5] mr-2"}),(0,a.jsxs)("span",{className:"text-[#F5F5F5] text-xs",children:["Search ",null==t?void 0:t.name]})]}),(0,a.jsxs)(es,{open:n,onOpenChange:o,children:[(0,a.jsx)(et,{placeholder:"Search by channel or username..."}),(0,a.jsxs)(ea,{children:[(0,a.jsx)(er,{children:"No results found."}),(0,a.jsx)(el,{heading:"Channels",children:null==r?void 0:r.map(e=>(0,a.jsx)(ei,{onSelect:()=>d(e._id),children:e.name},e._id))}),(0,a.jsx)(en,{}),(0,a.jsx)(el,{heading:"Members",children:null==l?void 0:l.map(e=>(0,a.jsx)(ei,{onSelect:()=>c(e._id),children:e.user.name},e._id))})]})]})]}),(0,a.jsx)("div",{className:"ml-auto flex-1 flex items-center justify-end",children:(0,a.jsx)(z.z,{variant:"transparent",children:(0,a.jsx)(X.Z,{className:"size-5 text-[#F5F5F5]"})})})]})};var ed=t(4938),ec=t(5886),eu=t(4766),em=t(7782),ex=t(9649),eh=t(7163);let ef=e=>{let{icon:s,label:t,isActive:r,callback:l}=e;return(0,a.jsxs)("div",{className:(0,U.cn)("flex flex-col items-center justify-center gap-y-0.5 cursor-pointer group","Home"!==t&&"cursor-not-allowed"),children:[(0,a.jsx)(z.z,{variant:"transparent",className:(0,U.cn)("size-9 p-2 group-hover:bg-accent/20",r&&"bg-accent/20","Home"!==t&&"cursor-not-allowed"),onClick:"Home"===t?l:void 0,children:(0,a.jsx)(s,{className:"size-5 text-[#F5F5F5] group-hover:scale-110 transition-all"})}),(0,a.jsx)("span",{className:"text-[11px] text-[#F5F5F5] group-hover:text-accent",children:t})]})};var ep=t(9397),ev=t(2575),ej=t(6225);let eg=()=>{let e=(0,A.useRouter)(),s=(0,p.m)(),[t,l]=(0,ej.D)(),{data:n,isLoading:i}=(0,ev.x)(),{data:o,isLoading:d}=(0,K.F)({id:s}),c=null==n?void 0:n.filter(e=>(null==e?void 0:e._id)!==s);return(0,a.jsxs)(O.h_,{modal:!1,children:[(0,a.jsx)(O.$F,{asChild:!0,className:"outline-none relative",children:(0,a.jsx)(z.z,{className:"truncate size-9 relative overflow-hidden bg-[#ABABAD] hover:bg-[#ABABAD]/75 text-slate-800 font-semibold text-xl py-3 transition-colors duration-200 rounded-b-lg",children:d?(0,a.jsx)(r.Z,{className:"size-5 animate-spin shrink-0  hover:bg-[#616061]/90 transition-colors duration-200"}):null==o?void 0:o.name.charAt(0).toUpperCase()})}),(0,a.jsxs)(O.AW,{side:"bottom",align:"start",className:"w-64",children:[(0,a.jsxs)(O.Xi,{onClick:()=>e.push("/workspace/".concat(s)),className:"cursor-pointer flex-col justify-start items-start capitalize font-bold",children:[null==o?void 0:o.name,(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Active workspace"})]}),(0,a.jsx)(O.VD,{className:"my-1 bg-neutral-200/0"}),null==c?void 0:c.map(s=>(0,a.jsxs)(O.Xi,{className:"cursor-pointer capitalize overflow-hidden hover:bg-neutral-100/50 transition-colors duration-150",onClick:()=>e.push("/workspace/".concat(s._id)),children:[(0,a.jsx)("div",{className:"shrink-0 size-9 relative overflow-hidden bg-[#616061] text-[#F5F5F5] font-semibold text-lg rounded-md flex items-center justify-center mr-2 py-3 hover:bg-[#333333]/80 transition-colors duration-200 rounded-b-lg",children:s.name.charAt(0).toUpperCase()}),(0,a.jsx)("p",{className:"truncate",children:s.name})]},s._id)),c&&(null==c?void 0:c.length)>0&&(0,a.jsx)(O.VD,{className:"my-1 bg-neutral-200/70"}),(0,a.jsxs)(O.Xi,{className:"cursor-pointer",onClick:()=>l(!0),children:[(0,a.jsx)("div",{className:"size-9 relative overflow-hidden bg-[#F2F2F2] text-slate-800 font-semibold text-lg rounded-md flex items-center justify-center mr-2 py-3 hover:bg-neutral-100 transition-colors duration-200 rounded-b-lg",children:(0,a.jsx)(ep.Z,{})}),"Create a new workspace"]})]})]})},eb=()=>{let e=(0,A.useRouter)(),s=(0,A.usePathname)();return(0,a.jsxs)("aside",{className:"w-[70px] h-full bg-[#481349] flex flex-col gap-y-4 items-center pt-[9px] pb-4",children:[(0,a.jsx)(eg,{}),(0,a.jsx)(ef,{icon:ed.Z,label:"Home",isActive:s.includes("/workspace"),callback:()=>{e.push("/")}}),(0,a.jsx)(ef,{icon:ec.Z,label:"DMs"}),(0,a.jsx)(ef,{icon:eu.Z,label:"Activity"}),(0,a.jsx)(ef,{icon:em.Z,label:"More"}),(0,a.jsx)("div",{className:"flex flex-col items-center justify-center gap-y-1 mt-auto",children:(0,a.jsx)(ex.k,{label:"User options",side:"right",children:(0,a.jsx)(eh.l,{})})})]})};var eN=t(1555),ey=t(245),ew=t(1217),ek=t(6937),ez=t(1615),eF=t(535);let eC=(0,eF.j)("flex items-center gap-1.5 justify-start font-normal h-7 px-4 text-sm overflow-hidden",{variants:{variant:{default:"text-[#F9EDFFCC]",active:"text-[#481349] bg-white/90 hover:bg-white/90"}},defaultVariants:{variant:"default"}}),e_=e=>{let{id:s,label:t="Member",image:r,variant:l="default"}=e,n=(0,p.m)(),i=t.charAt(0).toUpperCase();return(0,a.jsx)(z.z,{variant:"transparent",className:(0,U.cn)(eC({variant:l})),size:"sm",asChild:!0,children:(0,a.jsxs)(S.default,{href:"/workspace/".concat(n,"/member/").concat(s),children:[(0,a.jsx)(T.qE,{className:"size-5 rounded-md mr-1",children:(0,a.jsx)("div",{className:"absolute inset-0 overflow-hidden rounded-md",children:(0,a.jsxs)("div",{className:"grayscale-[15%] opacity-90 hover:grayscale-0 hover:opacity-100 transition-all duration-200 w-full h-full",children:[(0,a.jsx)(T.F$,{className:"rounded-md object-cover w-full h-full",src:r}),(0,a.jsx)(T.Q5,{className:"rounded-md !text-[#FFFFFF]/95 bg-[#E96A68]/90 text-xs w-full h-full flex items-center justify-center",children:i})]})})}),(0,a.jsx)("span",{className:"text-sm truncate",children:t})]})})},eS=(0,eF.j)("flex items-center gap-1.5 justify-start font-normal h-7 px-[18px] text-sm overflow-hidden",{variants:{variant:{default:"text-[#F9EDFFCC]",active:"text-[#481349] bg-white/90 hover:bg-white/90"}},defaultVariants:{variant:"default"}}),eA=e=>{let{label:s,id:t,icon:r,variant:l}=e,n=(0,p.m)();return(0,a.jsx)(z.z,{variant:"transparent",size:"sm",className:(0,U.cn)(eS({variant:l}),"Threads"===s&&"cursor-not-allowed","Drafts & Sent"===s&&"cursor-not-allowed"),asChild:!0,children:(0,a.jsxs)(S.default,{href:"/workspace/".concat(n,"/channel/").concat(t),children:[(0,a.jsx)(r,{className:"size-3.5 mr-1 shrink-0"}),(0,a.jsx)("span",{className:"text-sm truncate",children:s})]})})};var eZ=t(5909),eE=t(5868),eM=t(7413);let eI=()=>{let[e,s]=(0,i.useState)(null),[t,a]=(0,i.useState)(null),[r,l]=(0,i.useState)(null),n=(0,i.useMemo)(()=>"pending"===r,[r]),o=(0,i.useMemo)(()=>"success"===r,[r]),d=(0,i.useMemo)(()=>"error"===r,[r]),c=(0,i.useMemo)(()=>"settled"===r,[r]),u=(0,v.Db)(j.h.workspaces.update);return{mutate:(0,i.useCallback)(async(e,t)=>{var r,n,i;try{s(null),a(null),l("pending");let n=await u(e);return null==t||null===(r=t.onSuccess)||void 0===r||r.call(t,n),n}catch(e){if(l("error"),null==t||null===(n=t.onError)||void 0===n||n.call(t,e),null==t?void 0:t.throwError)throw e}finally{l("settled"),null==t||null===(i=t.onSettled)||void 0===i||i.call(t)}},[u]),data:e,error:t,isPending:n,isSuccess:o,isError:d,isSettled:c}},eR=()=>{let[e,s]=(0,i.useState)(null),[t,a]=(0,i.useState)(null),[r,l]=(0,i.useState)(null),n=(0,i.useMemo)(()=>"pending"===r,[r]),o=(0,i.useMemo)(()=>"success"===r,[r]),d=(0,i.useMemo)(()=>"error"===r,[r]),c=(0,i.useMemo)(()=>"settled"===r,[r]),u=(0,v.Db)(j.h.workspaces.remove);return{mutate:(0,i.useCallback)(async(e,t)=>{var r,n,i;try{s(null),a(null),l("pending");let n=await u(e);return null==t||null===(r=t.onSuccess)||void 0===r||r.call(t,n),n}catch(e){if(l("error"),null==t||null===(n=t.onError)||void 0===n||n.call(t,e),null==t?void 0:t.throwError)throw e}finally{l("settled"),null==t||null===(i=t.onSettled)||void 0===i||i.call(t)}},[u]),data:e,error:t,isPending:n,isSuccess:o,isError:d,isSettled:c}};var eL=t(279);let eD=e=>{let{open:s,setOpen:t,initialValue:r}=e,l=(0,A.useRouter)(),o=(0,p.m)(),[d,c]=(0,L.t)("Are you sure you want to continue?","This action cannot be undone. Once deleted, your data will be permanently removed from our servers."),[u,m]=(0,i.useState)(r),[x,h]=(0,i.useState)(!1),{mutate:f,isPending:v}=eI(),{mutate:j,isPending:g}=eR(),b=async()=>{await c()&&j({id:o},{onSuccess:()=>{n.Am.success("Workspace removed successfully."),l.replace("/")},onError:()=>{n.Am.error("Failed to remove workspace. Please try again.")}})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{}),(0,a.jsx)(J.Vq,{open:s,onOpenChange:t,children:(0,a.jsxs)(J.cZ,{className:"p-0 bg-gray-50 overflow-hidden rounded-xl",children:[(0,a.jsx)(J.fK,{className:"p-4 border-b bg-gray-100 transition-colors",children:(0,a.jsx)(J.$N,{children:r})}),(0,a.jsxs)("div",{className:"px-4 pb-4 flex flex-col gap-y-2",children:[(0,a.jsxs)(J.Vq,{open:x,onOpenChange:e=>{e&&m(r),h(e)},children:[(0,a.jsx)(J.hg,{children:(0,a.jsxs)("div",{className:"px-5 py-4 bg-gray-100 rounded-lg border cursor-pointer hover:bg-gray-50 hover:shadow-sm    transition-all duration-150 ease-in-out",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"Workspace name"}),(0,a.jsx)("p",{className:"text-sm text-[#1264A3] font-semibold hover:underline    transition-colors duration-150",children:"Edit"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1 text-left",children:r})]})}),(0,a.jsxs)(J.cZ,{children:[(0,a.jsx)(J.fK,{children:(0,a.jsx)(J.$N,{children:"Rename current workspace"})}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),f({id:o,name:u},{onSuccess:()=>{h(!1),n.Am.success("Workspace updated successfully.")},onError:()=>{n.Am.error("Failed to update workspace. Please try again.")}})},children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Workspace name"}),(0,a.jsx)(eL.I,{value:u,disabled:v,onChange:e=>m(e.target.value),required:!0,autoFocus:!0,minLength:3,maxLength:80,placeholder:'Workspace name e.g. "Work", "Personal", "Home"',className:"h-10 border-gray-300"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[u.length,"/80 characters"]})]}),(0,a.jsxs)(J.cN,{children:[(0,a.jsx)(J.GG,{asChild:!0,children:(0,a.jsx)(z.z,{type:"button",variant:"outline",disabled:v,children:"Cancel"})}),(0,a.jsx)(z.z,{type:"submit",disabled:!u.trim()||v||u===r,children:v?"Saving...":"Save"})]})]})]})]}),(0,a.jsxs)("button",{disabled:g,onClick:b,className:"flex items-center gap-x-2 px-5 py-4 bg-gray-100 rounded-xl border border-gray-200 cursor-pointer hover:bg-rose-50 text-rose-600 hover:text-rose-700 transition-all duration-150 ease-in-out hover:shadow-sm",children:[(0,a.jsx)(eM.Z,{className:"size-4"}),(0,a.jsx)("p",{className:"text-sm font-semibold",children:"Delete workspace"})]})]})]})})]})};var eT=t(8867),eO=t(2636);let eY=()=>{let[e,s]=(0,i.useState)(null),[t,a]=(0,i.useState)(null),[r,l]=(0,i.useState)(null),n=(0,i.useMemo)(()=>"pending"===r,[r]),o=(0,i.useMemo)(()=>"success"===r,[r]),d=(0,i.useMemo)(()=>"error"===r,[r]),c=(0,i.useMemo)(()=>"settled"===r,[r]),u=(0,v.Db)(j.h.workspaces.newJoinCode);return{mutate:(0,i.useCallback)(async(e,t)=>{var r,n,i;try{s(null),a(null),l("pending");let n=await u(e);return null==t||null===(r=t.onSuccess)||void 0===r||r.call(t,n),n}catch(e){if(l("error"),null==t||null===(n=t.onError)||void 0===n||n.call(t,e),null==t?void 0:t.throwError)throw e}finally{l("settled"),null==t||null===(i=t.onSettled)||void 0===i||i.call(t)}},[u]),data:e,error:t,isPending:n,isSuccess:o,isError:d,isSettled:c}},eP=e=>{let{open:s,setOpen:t,name:r,joinCode:l}=e,i=(0,p.m)(),[o,d]=(0,L.t)("Generate a New Workspace Invite Code?","Creating a new invite code will deactivate the current one. Only members with the new code can join the workspace."),{mutate:c}=eY(),u=async()=>{await d()&&c({workspaceId:i},{onSuccess:()=>{n.Am.success("Success! Your new invite code is ready to use.")},onError:()=>{n.Am.error("Error: Unable to regenerate the invite code.")}})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{}),(0,a.jsx)(J.Vq,{open:s,onOpenChange:t,children:(0,a.jsxs)(J.cZ,{className:"p-6 max-w-xl bg-white rounded-lg shadow-lg transition-opacity duration-300 ease-in-out","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:[(0,a.jsxs)(J.fK,{className:"space-y-2",children:[(0,a.jsxs)(J.$N,{id:"modal-title",className:"text-xl font-semibold text-gray-900",children:["Invite to ",r]}),(0,a.jsx)(J.Be,{id:"modal-description",className:"text-sm text-gray-600",children:"Share the invite code and link below to get others into your workspace."})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 py-8",children:[(0,a.jsx)("p",{className:"uppercase text-4xl font-semibold tracking-wide text-gray-800",children:l}),(0,a.jsxs)(z.z,{variant:"outline",size:"lg",onClick:()=>{let e="".concat(window.location.origin,"/join/").concat(i,"?").concat(l);navigator.clipboard.writeText(e).then(()=>{n.Am.success("Invite link copied to clipboard")}).catch(e=>{n.Am.error("Failed to copy invite link"),console.log(e)})},className:"flex items-center space-x-2 text-blue-600 border-blue-600 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Copy Invite Link",children:[(0,a.jsx)("span",{children:"Copy Invite Link"}),(0,a.jsx)(eT.Z,{className:"w-5 h-5"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsxs)(z.z,{onClick:u,variant:"outline",children:["New code",(0,a.jsx)(eO.Z,{className:"size-4 ml-2"})]}),(0,a.jsx)(J.GG,{asChild:!0,children:(0,a.jsx)(z.z,{children:"Close"})})]})]})})]})},eB=e=>{let{workspace:s,isAdmin:t}=e,[r,l]=(0,i.useState)(!1),[n,o]=(0,i.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eP,{open:n,setOpen:o,name:s.name,joinCode:s.joinCode}),(0,a.jsx)(eD,{open:r,setOpen:l,initialValue:s.name}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 h-[49px] gap-0.5",children:[(0,a.jsxs)(O.h_,{children:[(0,a.jsx)(O.$F,{asChild:!0,children:(0,a.jsxs)(z.z,{variant:"transparent",className:"font-semibold text-lg w-auto p-1.5 overflow-hidden",size:"sm",children:[(0,a.jsx)("span",{className:"truncate",children:null==s?void 0:s.name}),(0,a.jsx)(Z.Z,{className:"size-4 ml-0.5 shrink-0"})]})}),(0,a.jsxs)(O.AW,{side:"bottom",align:"start",className:"w-64",children:[(0,a.jsxs)(O.Xi,{className:"cursor-pointer capitalize",children:[(0,a.jsx)("div",{className:"size-9 relative overflow-hidden bg-[#616061] text-[#F5F5F5] font-semibold text-xl rounded-md flex items-center justify-center mr-2",children:s.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("p",{className:"font-bold",children:s.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active workspace"})]})]}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.VD,{}),(0,a.jsxs)(O.Xi,{className:"cursor-pointer py-2",onClick:()=>o(!0),children:["Invite users to ",s.name]}),(0,a.jsx)(O.Xi,{className:"cursor-pointer py-2",onClick:()=>l(!0),children:"Preferences"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,a.jsx)(ex.k,{label:"Filter conversations",side:"bottom",children:(0,a.jsx)(z.z,{variant:"transparent",className:"cursor-not-allowed",size:"iconSm",children:(0,a.jsx)(eZ.Z,{})})}),(0,a.jsx)(ex.k,{label:"New message",side:"bottom",children:(0,a.jsx)(z.z,{variant:"transparent",className:"cursor-not-allowed",size:"iconSm",children:(0,a.jsx)(eE.Z,{})})})]})]})]})};var eU=t(7700),eV=t(9089);let eW=e=>{let{children:s,label:t,hint:r,onNew:l}=e,[n,i]=(0,eU.Z)(!0);return(0,a.jsxs)("div",{className:"flex flex-col mt-3 px-2",children:[(0,a.jsxs)("div",{className:"flex items-center px-3.5 group",children:[(0,a.jsxs)(z.z,{variant:"transparent",className:"p-0.5 text-sm text-[#F9EDFFCC] shrink-0 size-6",onClick:i,children:[" ",(0,a.jsx)(eV.qL$,{className:(0,U.cn)("size-4 transition-transform",!n&&"-rotate-90")})]}),(0,a.jsx)(z.z,{variant:"transparent",size:"sm",className:"group px-1.5 text-sm text-[#F9EDFFCC] h-[28px] justify-start overflow-hidden items-center mr-auto",children:(0,a.jsx)("span",{className:"truncate",children:t})}),l&&(0,a.jsx)(ex.k,{label:r,side:"top",align:"center",children:(0,a.jsx)(z.z,{variant:"transparent",className:(0,U.cn)("opacity-0 group-hover:opacity-100 transition-opacity justify-center p-0.5 text-sm text-[#F9EDFFCC] size-6 shrink-0","Direct Messages"===t&&"cursor-not-allowed"),onClick:l,children:(0,a.jsx)(ep.Z,{className:"size-5"})})})]}),n&&s]})},eq=()=>{let e=(0,ez.H)(),s=(0,f.b)(),t=(0,p.m)(),[l,n]=(0,ek.O)(),{data:i,isLoading:o}=(0,y.i)({workspaceId:t}),{data:d,isLoading:c}=(0,K.F)({id:t}),{data:u,isLoading:m}=(0,G.B)({workspaceId:t}),{data:h,isLoading:v}=H({workspaceId:t});return c||o?(0,a.jsx)("div",{className:"flex flex-col h-full items-center justify-center bg-[#5E2C5F]",children:(0,a.jsx)(r.Z,{className:"size-5 animate-spin text-[#F5F5F5]"})}):d&&i?(0,a.jsxs)("div",{className:"flex flex-col bg-[#5E2C5F] h-full",children:[(0,a.jsx)(eB,{workspace:d,isAdmin:"admin"===i.role}),(0,a.jsxs)("div",{className:"flex flex-col px-2 mt-3",children:[(0,a.jsx)(eA,{label:"Threads",icon:eN.Z,id:"threads"}),(0,a.jsx)(eA,{label:"Drafts & Sent",icon:ey.Z,id:"drafts"})]}),(0,a.jsx)(eW,{label:"Channels",hint:"New channel",onNew:"admin"===i.role?()=>n(!0):void 0,children:null==u?void 0:u.map(e=>(0,a.jsx)(eA,{icon:ew.Z,label:e.name,id:e._id,variant:s===e._id?"active":"default"},e._id))}),(0,a.jsx)(eW,{label:"Direct Messages",hint:"New direct message",onNew:()=>{},children:null==h?void 0:h.map(s=>(0,a.jsx)(e_,{id:s._id,label:s.user.name,image:s.user.image,variant:s._id===e?"active":"default"},s._id))})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 h-full items-center justify-center bg-[#5E2C5F]",children:[(0,a.jsx)(x.Z,{className:"size-5 text-[#F5F5F5]"}),(0,a.jsx)("p",{className:"text-sm text-[#F5F5F5]",children:"Sorry, workspace not found."})]})};var e$=e=>{let{children:s}=e,{parentMessageId:t,profileMemberId:n,onClose:i}=(0,l.u)();return(0,a.jsxs)("div",{className:"h-full",children:[(0,a.jsx)(eo,{}),(0,a.jsxs)("div",{className:"flex h-[calc(100vh-40px)]",children:[(0,a.jsx)(eb,{}),(0,a.jsxs)(V,{direction:"horizontal",autoSaveId:"ca-workspace-layout",children:[(0,a.jsx)(W,{defaultSize:20,minSize:11,className:"bg-[#5E2C5F]",children:(0,a.jsx)(eq,{})}),(0,a.jsx)(q,{withHandle:!0}),(0,a.jsx)(W,{minSize:20,defaultSize:80,children:s}),(!!t||!!n)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q,{withHandle:!0}),(0,a.jsx)(W,{minSize:20,defaultSize:29,children:t?(0,a.jsx)(_,{messageId:t,onClose:i}):n?(0,a.jsx)(Y,{memberId:n,onClose:i}):(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)(r.Z,{className:"size-5 animate-spin text-muted-foreground"})})})]})]})]})]})}},2060:function(e,s,t){"use strict";t.d(s,{$F:function(){return u},AW:function(){return x},VD:function(){return p},Xi:function(){return h},_x:function(){return m},h_:function(){return c},qB:function(){return f}});var a=t(7437),r=t(2265),l=t(9400),n=t(407),i=t(401),o=t(519),d=t(3448);let c=l.fC,u=l.xz;l.ZA,l.Uv,l.Tr;let m=l.Ee;r.forwardRef((e,s)=>{let{className:t,inset:r,children:i,...o}=e;return(0,a.jsxs)(l.fF,{ref:s,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...o,children:[i,(0,a.jsx)(n.Z,{className:"ml-auto"})]})}).displayName=l.fF.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.tu,{ref:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=l.tu.displayName;let x=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...n}=e;return(0,a.jsx)(l.Uv,{children:(0,a.jsx)(l.VY,{ref:s,sideOffset:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});x.displayName=l.VY.displayName;let h=r.forwardRef((e,s)=>{let{className:t,inset:r,...n}=e;return(0,a.jsx)(l.ck,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...n})});h.displayName=l.ck.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,checked:n,...o}=e;return(0,a.jsxs)(l.oC,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.wU,{children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})}),r]})}).displayName=l.oC.displayName;let f=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(l.Rk,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.wU,{children:(0,a.jsx)(o.Z,{className:"h-2 w-2 fill-current"})})}),r]})});f.displayName=l.Rk.displayName,r.forwardRef((e,s)=>{let{className:t,inset:r,...n}=e;return(0,a.jsx)(l.__,{ref:s,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...n})}).displayName=l.__.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...r})});p.displayName=l.Z0.displayName},279:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var a=t(7437),r=t(2265),l=t(3448);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},1593:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(7437),r=t(2265),l=t(5156),n=t(3448);let i=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:i=!0,...o}=e;return(0,a.jsx)(l.f,{ref:s,decorative:i,orientation:r,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...o})});i.displayName=l.f.displayName},7163:function(e,s,t){"use strict";t.d(s,{l:function(){return m}});var a=t(7437),r=t(6540),l=t(7692),n=t(6425),i=t(2060),o=t(7266),d=t(1620);let c=()=>{let e=(0,o.aM)(d.h.users.current);return{data:e,isLoading:void 0===e}};var u=t(6246);let m=()=>{let{signOut:e}=(0,n.X$)(),{data:s,isLoading:t}=c();if(t)return(0,a.jsx)(r.Z,{className:"size-4 animate-spin text-muted-foreground"});if(!s)return null;let{image:o,name:d}=s,m=d.charAt(0).toUpperCase();return(0,a.jsxs)(i.h_,{modal:!1,children:[(0,a.jsx)(i.$F,{className:"outline-none relative",children:(0,a.jsx)(u.qE,{className:"rounded-md size-10 hover:opacity-75 transition",children:(0,a.jsx)("div",{className:"absolute inset-0 overflow-hidden rounded-md",children:(0,a.jsxs)("div",{className:"grayscale-[15%] opacity-90 hover:grayscale-0 transition-all duration-200 w-full h-full",children:[(0,a.jsx)(u.F$,{className:"rounded-md object-cover w-full h-full",alt:d,src:o}),(0,a.jsx)(u.Q5,{className:"rounded-md !text-[#F5F5F5] bg-[#5C3B58] w-full h-full flex items-center justify-center",children:m})]})})})}),(0,a.jsx)(i.AW,{align:"center",side:"right",className:"w-60",children:(0,a.jsxs)(i.Xi,{onClick:()=>e(),className:"h-10 cursor-pointer",children:[(0,a.jsx)(l.Z,{className:"size-4 mr-2"}),"Log out"]})})]})}},7009:function(e,s,t){"use strict";t.d(s,{B:function(){return l}});var a=t(7266),r=t(1620);let l=e=>{let{workspaceId:s}=e,t=(0,a.aM)(r.h.channels.get,{workspaceId:s});return{data:t,isLoading:void 0===t}}},2618:function(e,s,t){"use strict";t.d(s,{R:function(){return l}});var a=t(7266),r=t(1620);let l=e=>{let{id:s}=e,t=(0,a.aM)(r.h.members.getById,{id:s});return{data:t,isLoading:void 0===t}}},6937:function(e,s,t){"use strict";t.d(s,{O:function(){return n}});var a=t(3915),r=t(2964);let l=(0,a.cn)(!1),n=()=>(0,r.KO)(l)},1843:function(e,s,t){"use strict";t.d(s,{F:function(){return l}});var a=t(7266),r=t(1620);let l=e=>{let{id:s}=e,t=(0,a.aM)(r.h.workspaces.getById,{id:s});return{data:t,isLoading:void 0===t}}},2575:function(e,s,t){"use strict";t.d(s,{x:function(){return l}});var a=t(7266),r=t(1620);let l=()=>{let e=(0,a.aM)(r.h.workspaces.get);return{data:e,isLoading:void 0===e}}},6225:function(e,s,t){"use strict";t.d(s,{D:function(){return n}});var a=t(3915),r=t(2964);let l=(0,a.cn)(!1),n=()=>(0,r.KO)(l)},8291:function(e,s,t){"use strict";t.d(s,{b:function(){return r}});var a=t(9376);let r=()=>(0,a.useParams)().channelId},1615:function(e,s,t){"use strict";t.d(s,{H:function(){return r}});var a=t(9376);let r=()=>(0,a.useParams)().memberId}},function(e){e.O(0,[699,51,560,432,317,279,579,644,147,964,553,219,648,534,811,971,117,744],function(){return e(e.s=86)}),_N_E=e.O()}]);