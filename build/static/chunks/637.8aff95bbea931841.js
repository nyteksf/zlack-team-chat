(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637,229],{5523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return l}});let l=r(7043)._(r(2265)).default.createContext(null)},2229:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var l=r(7437),s=r(3145),n=r(2744),i=r(6417),a=r(7546),o=r(2489),c=r(1422);let d=(0,r(9205).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var u=r(2265),h=r(3448),x=r(9649),f=r(2381),m=r(4190);r(1305);var v=e=>{let{onCancel:t,onSubmit:r,placeholder:v="Write something...",defaultValue:g=[],innerRef:b,disabled:j=!1,variant:p="create"}=e,[E,N]=(0,u.useState)(null),[y,k]=(0,u.useState)(""),w=(0,u.useMemo)(()=>!E&&0===y.replace("/s*/g","").trim().length,[y,E]),[z,C]=(0,u.useState)(!0),S=(0,u.useRef)(r),R=(0,u.useRef)(j),T=(0,u.useRef)(v),_=(0,u.useRef)(null),L=(0,u.useRef)(null),O=(0,u.useRef)(g),Z=(0,u.useRef)(null);return(0,u.useLayoutEffect)(()=>{S.current=r,T.current=v,O.current=g,R.current=j}),(0,u.useEffect)(()=>{if(!L.current)return;let e=L.current,t=e.appendChild(e.ownerDocument.createElement("div")),r={theme:"snow",placeholder:T.current,modules:{toolbar:[["bold","italic","strike"],["link"],[{list:"ordered"},{list:"bullet"}]],keyboard:{bindings:{enter:{key:"Enter",handler:()=>{var e,t,r;let s=l.getText(),n=(null===(t=Z.current)||void 0===t?void 0:null===(e=t.files)||void 0===e?void 0:e[0])||null;if(!n&&0===s.replace(/<(.|\n)*?>/g,"").trim().length)return;let i=JSON.stringify(l.getContents());null===(r=S.current)||void 0===r||r.call(S,{body:i,image:n})}},shift_enter:{key:"Enter",shiftKey:!0,handler:()=>{var e;return l.insertText((null===(e=l.getSelection())||void 0===e?void 0:e.index)||0,"\n")}}}}}},l=new a.ZP(t,r);return _.current=l,_.current.focus(),b&&(b.current=l),l.setContents(O.current),k(l.getText()),l.on(a.ZP.events.TEXT_CHANGE,()=>{k(l.getText())}),()=>{l.off(a.ZP.events.TEXT_CHANGE),e&&(e.innerHTML=""),_.current&&(_.current=null),b&&(b.current=null)}},[b]),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("input",{type:"file",accept:"image/*",ref:Z,onChange:e=>N(e.target.files[0]),className:"hidden"}),(0,l.jsxs)("div",{className:(0,h.cn)("flex flex-col border border-slate-200 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-[#EE856E]/30 focus-within:border-[#EE856E] transition-all duration-150 bg-white",j&&"opacity-50"),children:[(0,l.jsx)("div",{className:"h-full ql-custom",ref:L}),!!E&&(0,l.jsx)("div",{className:"p-2",children:(0,l.jsxs)("div",{className:"relative size-[62px] flex items-center justify-center group/image rounded-lg border border-slate-200 bg-slate-50",children:[(0,l.jsx)(x.k,{label:"Remove image",align:"center",side:"right",children:(0,l.jsx)("button",{onClick:()=>{N(null),Z.current.value=""},className:"hidden group-hover/image:flex rounded-full bg-slate-800/90 hover:bg-slate-900 absolute -top-2.5 -right-2.5 text-white size-6 z-[4] border-2 border-[#F5F5F5] shadow-sm items-center justify-center transition-all duration-350 ease-out",children:(0,l.jsx)(o.Z,{className:"size-3.5 scale-100 hover:scale-110 transform transition-transform duration-350 ease-out"})})}),(0,l.jsx)(s.default,{src:URL.createObjectURL(E),alt:"Uploaded",fill:!0,className:"rounded-xl overflow-hidden border object-cover"})]})}),(0,l.jsxs)("div",{className:"flex px-2 pb-2 pt-1 z-[5] border-t border-slate-100",children:[(0,l.jsx)(x.k,{label:z?"Hide formatting":"Show formatting",children:(0,l.jsx)(f.z,{disabled:j,size:"iconSm",variant:"ghost",onClick:()=>{var e;C(e=>!e);let t=null===(e=L.current)||void 0===e?void 0:e.querySelector(".ql-toolbar");t&&t.classList.toggle("hidden")},className:"hover:bg-slate-100 text-slate-600 hover:text-slate-900",children:(0,l.jsx)(i.Gyp,{className:"size-4"})})}),(0,l.jsx)(m.t,{onEmojiSelect:e=>{var t;let r=_.current;null==r||r.insertText((null==r?void 0:null===(t=r.getSelection())||void 0===t?void 0:t.index)||0,e)},children:(0,l.jsx)(f.z,{disabled:j,size:"iconSm",variant:"ghost",className:"hover:bg-slate-100 text-slate-600 hover:text-slate-900",children:(0,l.jsx)(c.Z,{className:"size-4"})})}),"create"===p&&(0,l.jsx)(x.k,{label:"Image",children:(0,l.jsx)(f.z,{disabled:j,size:"iconSm",variant:"ghost",onClick:()=>{var e;return null===(e=Z.current)||void 0===e?void 0:e.click()},className:"hover:bg-slate-100 text-slate-600 hover:text-slate-900",children:(0,l.jsx)(d,{className:"size-4"})})}),"update"===p&&(0,l.jsxs)("div",{className:"ml-auto flex items-center gap-x-2",children:[(0,l.jsx)(f.z,{variant:"ghost",size:"sm",onClick:t,disabled:j,className:"text-slate-700 hover:bg-slate-100",children:"Cancel"}),(0,l.jsx)(f.z,{disabled:j||w,onClick:()=>{var e;r({body:JSON.stringify(null===(e=_.current)||void 0===e?void 0:e.getContents()),image:E})},size:"sm",className:"bg-[#EE856E]/90 hover:bg-[#EE856E] transition-colors text-white font-medium",children:"Save"})]}),"create"===p&&(0,l.jsx)(f.z,{disabled:j||w,onClick:()=>{var e;r({body:JSON.stringify(null===(e=_.current)||void 0===e?void 0:e.getContents()),image:E})},size:"iconSm",className:(0,h.cn)("ml-auto",w?"bg-white text-slate-400 cursor-not-allowed":"bg-[#EE856E]/90 hover:bg-[#EE856E] transition-colors text-white shadow-sm"),children:(0,l.jsx)(n.D6S,{className:"size-4"})})]})]}),"create"===p&&(0,l.jsx)("div",{className:(0,h.cn)("p-2 text-[10px] text-slate-500 flex justify-end opacity-0 transition-opacity duration-200",!w&&"opacity-100"),children:(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Shift + Return"})," to add a new line"]})})]})}},1305:function(){}}]);